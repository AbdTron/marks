<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Calculator</title>
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNhbGN1bGF0b3IiPjxyZWN0IHdpZHRoPSIxNiIgaGVpZ2h0PSIyMCIgeD0iNCIgeT0iMiIgcng9IjIiLz48bGluZSB4MT0iOCIgeDI9IjE2IiB5MT0iNiIgeTI9IjYiLz48bGluZSB4MT0iMTYiIHgyPSIxNiIgeTE9IjE0IiB5Mj0iMTgiLz48cGF0aCBkPSJNMTYgMTBoLjAxIi8+PHBhdGggZD0iTTEyIDEwaC4wMSIvPjxwYXRoIGQ9Ik04IDEwaC4wMSIvPjxwYXRoIGQ9Ik0xMiAxNGguMDEiLz48cGF0aCBkPSJNOCAxNGguMDEiLz48cGF0aCBkPSJNMTIgMThoLjAxIi8+PHBhdGggZD0iTTggMThoLjAxIi8+PC9zdmc+">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #f2f2f7;
            color: #000;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 1024px) {
            .container {
                height: 100vh;
                overflow: hidden;
                padding: 2vh;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 2vh;
        }

        .header h1 {
            font-size: 34px;
            font-weight: 700;
            margin: 0;
            color: #000;
        }

        .current-gpa {
            display: flex;
            gap: 20px;
            margin-bottom: 2vh;
            flex-wrap: wrap;
        }

        input {
            background: #ffffff;
            border: 1px solid #e5e5ea;
            border-radius: 10px;
            padding: 12px 16px;
            font-size: 17px;
            color: #000;
            transition: all 0.2s;
        }

        input:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 3px rgba(0,122,255,0.2);
        }

        .grades-table {
            width: 100%;
            border-radius: 12px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 2vh;
            font-size: 15px;
            border-spacing: 0;
            overflow: hidden;
        }

        .grades-table th, .grades-table td {
            padding: 12px;
            border-bottom: 1px solid #e5e5ea;
            text-align: center;
        }

        .grades-table th {
            background-color: #f8f8f8;
            font-weight: 600;
            color: #666;
        }

        .grades-table input {
            width: 90%;
            padding: 8px;
            border-radius: 8px;
        }

        button {
            background: #007aff;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 14px 24px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background: #0066d6;
        }

        button:active {
            transform: scale(0.98);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2vh;
            gap: 12px;
        }

        .summary {
            background: #fff;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .summary-row {
            display: flex;
            gap: 20px;
            margin-bottom: 16px;
        }

        .summary-item {
            flex: 1;
        }

        .summary-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #666;
            font-size: 15px;
        }

        .disabled-input {
            background-color: #f2f2f7;
            color: #666;
        }

        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield !important;
        }

        .footer {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
            padding: 20px;
            text-align: center;
        }

        .footer a {
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: rgba(0, 122, 255, 0.1);
        }

        .footer a:hover {
            background: rgba(0, 122, 255, 0.2);
            transform: translateY(-2px);
        }

        .footer span {
            color: #007AFF;
            font-size: 14px;
            font-weight: 500;
        }

        .footer a:hover span {
            text-decoration: underline;
        }

        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a1a;
                color: #fff;
            }

            .header h1 {
                color: #fff;
            }

            input, .grades-table, .summary {
                background: #1c1c1e;
                border-color: #38383a;
                color: #fff;
            }

            .grades-table th {
                background-color: #2c2c2e;
                color: #999;
            }

            .grades-table td {
                border-color: #38383a;
            }

            .disabled-input {
                background-color: #2c2c2e;
                color: #999;
            }

            .summary-item label {
                color: #999;
            }

            .footer a {
                background: rgba(0, 122, 255, 0.15);
            }

            .footer a:hover {
                background: rgba(0, 122, 255, 0.25);
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .current-gpa {
                flex-direction: column;
                gap: 12px;
            }

            .summary-row {
                flex-direction: column;
                gap: 12px;
            }

            .controls {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Grade Calculator</h1>
        </div>

        <div class="current-gpa">
            <div>
                <label for="currentGpa">Previous GPA</label>
                <input type="number" id="currentGpa" step="0.01" placeholder="Enter current GPA">
            </div>
            <div>
                <label for="totalCreditHours">Total Credit Hours</label>
                <input type="number" id="totalCreditHours" placeholder="Enter total credit hours">
            </div>
        </div>

        <table class="grades-table">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Subject Name</th>
                    <th>Marks</th>
                    <th>Grade</th>
                    <th>Points</th>
                    <th>Credit Hours</th>
                    <th>Grade Points</th>
                </tr>
            </thead>
            <tbody id="gradesTableBody">
            </tbody>
        </table>

        <div class="controls">
            <button onclick="resetCalculator()" style="background: #ff3b30;">Reset Calculator</button>
            <button onclick="calculate()">Calculate</button>
        </div>

        <div class="summary">
            <div class="summary-row">
                <div class="summary-item">
                    <label>Sum Credit Hours</label>
                    <input type="text" id="creditHoursSum" readonly class="disabled-input">
                </div>
                <div class="summary-item">
                    <label>Sum Grade Points</label>
                    <input type="text" id="gradePointsSum" readonly class="disabled-input">
                </div>
            </div>
            <div class="summary-row">
                <div class="summary-item">
                    <label>Semester GPA</label>
                    <input type="text" id="semesterGpa" readonly class="disabled-input">
                </div>
                <div class="summary-item">
                    <label>CGPA</label>
                    <input type="text" id="cgpa" readonly class="disabled-input">
                </div>
            </div>
        </div>

        <div class="footer">
            <a href="https://xeeshan.carrd.co/">
                <span>Â© Developed and managed by Zeeshan Sarfraz</span>
            </a>
        </div>
    </div>

    <script>
        let currentRows = 0;
        const MAX_ROWS = 12;

        function getGradeAndPoints(marks) {
            if (marks >= 90 && marks <= 100) return {grade: 'A1', points: 4.0};
            if (marks >= 80 && marks <= 89) return {grade: 'A2', points: 4.0};
            if (marks >= 77 && marks <= 79) return {grade: 'A3', points: 3.66};
            if (marks >= 74 && marks <= 76) return {grade: 'B1', points: 3.33};
            if (marks >= 70 && marks <= 73) return {grade: 'B2', points: 3.0};
            if (marks >= 67 && marks <= 69) return {grade: 'B3', points: 2.66};
            if (marks >= 64 && marks <= 66) return {grade: 'C1', points: 2.33};
            if (marks >= 60 && marks <= 63) return {grade: 'C2', points: 2.0};
            if (marks >= 50 && marks <= 59) return {grade: 'D', points: 1.5};
            if (marks >= 0 && marks <= 49) return {grade: 'F', points: 0.0};
            return {grade: '', points: 0};
        }

        function updateRowCalculations(row) {
            const marks = parseFloat(row.querySelector('.marks').value) || 0;
            const creditHours = parseFloat(row.querySelector('.credit-hours').value) || 0;
            
            const {grade, points} = getGradeAndPoints(marks);
            
            row.querySelector('.grade').value = grade;
            row.querySelector('.points').value = points;
            
            const gradePoints = points * creditHours;
            row.querySelector('.grade-points').value = gradePoints.toFixed(2);

            if (row === document.querySelector('#gradesTableBody tr:last-child') && 
                (marks || creditHours) && currentRows < MAX_ROWS) {
                addNewRow();
            }
        }

        function addNewRow() {
            const tbody = document.getElementById('gradesTableBody');
            const row = document.createElement('tr');
            currentRows++;
            row.innerHTML = `
                <td>${currentRows}</td>
                <td><input type="text" class="subject-name" placeholder="Subject ${currentRows}"></td>
                <td><input type="number" class="marks" min="0" max="100" placeholder="0-100" oninput="updateRowCalculations(this.closest('tr'))"></td>
                <td><input type="text" class="grade" readonly></td>
                <td><input type="text" class="points" readonly></td>
                <td><input type="number" class="credit-hours" min="0" placeholder="Hours" oninput="updateRowCalculations(this.closest('tr'))"></td>
                <td><input type="text" class="grade-points" readonly></td>
            `;
            tbody.appendChild(row);
        }

        function initializeTable() {
            const tbody = document.getElementById('gradesTableBody');
            tbody.innerHTML = '';
            currentRows = 0;
            
            for(let i = 0; i < 6; i++) {
                addNewRow();
            }
        }

        function calculate() {
            let sumGradePoints = 0;
            let sumCreditHours = 0;

            document.querySelectorAll('#gradesTableBody tr').forEach(row => {
                const gradePoints = parseFloat(row.querySelector('.grade-points').value) || 0;
                const creditHours = parseFloat(row.querySelector('.credit-hours').value) || 0;
                
                sumGradePoints += gradePoints;
                sumCreditHours += creditHours;
            });

            document.getElementById('creditHoursSum').value = sumCreditHours;
            document.getElementById('gradePointsSum').value = sumGradePoints.toFixed(3);

            const semesterGpa = sumCreditHours ? (sumGradePoints / sumCreditHours) : 0;
            document.getElementById('semesterGpa').value = semesterGpa.toFixed(4);

            const currentGpa = parseFloat(document.getElementById('currentGpa').value) || 0;
            const totalCreditHours = parseFloat(document.getElementById('totalCreditHours').value) || 0;
            
            if(currentGpa && totalCreditHours) {
                const cgpa = ((currentGpa * totalCreditHours) + sumGradePoints) / (totalCreditHours + sumCreditHours);
                document.getElementById('cgpa').value = cgpa.toFixed(3);
            }
        }

        function resetCalculator() {
            document.querySelectorAll('input').forEach(input => input.value = '');
            initializeTable();
        }

        window.onload = initializeTable;
    </script>
</body>
</html>
